@model IEnumerable<LinkedHU_CENG.Models.Announcement>

@{
    var sessionUserID = ViewData["SessionUserId"] as Int32?;
}

<div class="container p-3">
    <br /><br />


    <table class="table table-bordered table-striped" style="width:100%">


        @foreach (var obj in Model.OrderByDescending(a => a.AnnouncementId))
        {

            <div class="card border p-3 mt-4  custom-shadow1">
                <div class="custom-margin1">
                    <div class="text-end">
                        @if (sessionUserID == obj.UserId)
                        {

                            <div class="dropdown">
                                <a class="dropdown-toggle my-2 my-sm-0" href="#" role="button" data-bs-toggle="dropdown">Edit</a>

                                <div class="dropdown-menu dropdown-menu-end">
                                    <a asp-controller="Announcement" asp-action="Update" asp-route-id="@obj.AnnouncementId"
                               class="dropdown-item mx-2 w-75"> <i class="bi bi-pencil-square"></i> Update</a>

                                    <a asp-controller="Announcement" asp-action="Delete" asp-route-id="@obj.AnnouncementId"
                               class="dropdown-item mx-2 w-75"> <i class="bi bi-trash-fill"></i> Delete</a>

                                </div>
                            </div>
                        }
                    </div>
                    @if (obj.UserProfilePicture == null)
                    {
                        <img src="https://static.thenounproject.com/png/2518416-200.png" class="rounded-circle" height="40" width="40" asp-append-version="true" /> 
                        <a asp-controller="User" asp-action="ViewProfile" asp-route-id="@obj.UserId"
                                       class="dropdown-item mx-2 w-75">  @obj.UserName</a>
                    }
                    else
                    {
                        <img src="~/profilePictures/@obj.UserProfilePicture" class="rounded-circle" height="40" width="40" asp-append-version="true" /> 
                        <a asp-controller="User" asp-action="ViewProfile" asp-route-id="@obj.UserId"
                                       class="dropdown-item mx-2 w-75">  @obj.UserName</a>
                    }
                    @*<h5>@obj.UserName</h5>*@
                    <br /> <br />
                    <small class="text-muted"> @obj.CreatedAt</small>
                    <br /> <br />
                    <h6>@obj.Content</h6>
                </div>
            </div>

            <br />
        }

    </table>
</div>